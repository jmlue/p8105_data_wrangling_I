---
title: "Simple document"
output: github_document
---

```{r}
library(tidyverse)
```

## PULSE data

```{r}
pulse_df =
  haven::read_sas("data/public_pulse_data.sas7bdat") %>% #Haven has package for reading in packages of alternative formats
  janitor::clean_names() %>%
  pivot_longer(
    bdi_score_bl:bdi_score_12m,
    names_to = "visit",
    values_to = "bdi_score",
    names_prefix = "bdi_score_" #remove prefix from column names becoming values
  ) %>% #go from wide format to long format, and what will rename new ones
  mutate(
    visit = replace(visit, visit == "bl", "00m")
  )

```


## Learning assessment

In the litters data, the variables gd0_weight and gd18_weight give the weight of the mother mouse on gestational days 0 and 18. Write a data cleaning chain that retains only litter_number and these columns; produces new variables gd and weight; and makes gd a numeric variable taking values 0 and 18 (for the last part, you might want to use recode …). Is this version “tidy”?

```{r}
pulse_trial_df =
  read_csv("data/FAS_litters.csv") %>%
  janitor::clean_names() %>%
  select(litter_number, gd0_weight, gd18_weight) %>%
  pivot_longer(
    gd0_weight:gd18_weight,
    names_to = "gd",
    values_to = "weight",
    names_prefix = "gd"
      ) %>%
  mutate(
    gd = case_match(gd, 
                    "0_weight" ~ 0,
                    "18_weight" ~ 18)
  )
```

It is tidy if wanting to see relationship between gd and weight, but if wanting to make a delta of weight change, then not a great tidy version for it

